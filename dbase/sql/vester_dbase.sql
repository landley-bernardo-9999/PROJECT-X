-- phpMyAdmin SQL Dump
-- version 4.7.9
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1:3306
-- Generation Time: Sep 16, 2018 at 01:02 PM
-- Server version: 5.7.21
-- PHP Version: 5.6.35

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `vester_dbase`
--

-- --------------------------------------------------------

--
-- Table structure for table `contactpersons`
--

DROP TABLE IF EXISTS `contactpersons`;
CREATE TABLE IF NOT EXISTS `contactpersons` (
  `contactPersonId` int(11) NOT NULL AUTO_INCREMENT,
  `relationship` varchar(255) DEFAULT NULL,
  `info_infoId` int(11) NOT NULL,
  PRIMARY KEY (`contactPersonId`,`info_infoId`),
  KEY `fk_contactPersons_info1_idx` (`info_infoId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `employees`
--

DROP TABLE IF EXISTS `employees`;
CREATE TABLE IF NOT EXISTS `employees` (
  `employeeId` int(11) NOT NULL AUTO_INCREMENT,
  `department` varchar(255) DEFAULT NULL,
  `position` varchar(255) DEFAULT NULL,
  `dateHired` date DEFAULT NULL,
  `salary` int(11) DEFAULT NULL,
  `info_infoId` int(11) NOT NULL,
  PRIMARY KEY (`employeeId`,`info_infoId`),
  KEY `fk_employees_info1_idx` (`info_infoId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `info`
--

DROP TABLE IF EXISTS `info`;
CREATE TABLE IF NOT EXISTS `info` (
  `infoId` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(45) DEFAULT NULL,
  `firstName` varchar(255) DEFAULT NULL,
  `lastName` varchar(45) DEFAULT NULL,
  `userName` varchar(45) DEFAULT NULL,
  `pass` varchar(45) DEFAULT NULL,
  `img` blob,
  `gender` varchar(45) DEFAULT NULL,
  `birthDate` date DEFAULT NULL,
  `mobileNumber` varchar(255) DEFAULT NULL,
  `emailAddress` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`infoId`),
  UNIQUE KEY `userName_UNIQUE` (`userName`),
  KEY `firstName` (`firstName`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `info`
--

INSERT INTO `info` (`infoId`, `type`, `firstName`, `lastName`, `userName`, `pass`, `img`, `gender`, `birthDate`, `mobileNumber`, `emailAddress`, `city`) VALUES
(1, 'Resident', 'Landley', 'Bernardo', 'landle', 'aaaaaaaaaaa', 0x34504b4f39575a4e4e582d65794a7361574e6c626e4e6c535751694f694930554574504f566461546b35594969776962476c6a5a57357a5a57564f5957316c496a6f69544746755a47786c655342435a584a7559584a6b62794973496d467a63326c6e626d566c546d46745a53493649694973496d467a63326c6e626d566c52573168615777694f6949694c434a7361574e6c626e4e6c556d567a64484a7059335270623234694f694a47623349675a57523159324630615739755957776764584e6c4947397562486b694c434a6a6147566a61304e76626d4e31636e4a6c626e5256633255694f6d5a6862484e6c4c434a77636d396b64574e3063794936573373695932396b5a534936496b6c4a49697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f69556c4d7749697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f6956314d694c434a7759576c6b5658425562794936496a49774d546b744d4467744d54416966537837496d4e765a4755694f694a5352434973496e42686157525663465276496a6f694d6a41784f5330774f4330784d434a394c4873695932396b5a534936496c4a4449697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f6952454d694c434a7759576c6b5658425562794936496a49774d546b744d4467744d54416966537837496d4e765a4755694f694a4551694973496e42686157525663465276496a6f694d6a41784f5330774f4330784d434a394c4873695932396b5a534936496c4a4e49697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f69524530694c434a7759576c6b5658425562794936496a49774d546b744d4467744d54416966537837496d4e765a4755694f694a4251794973496e42686157525663465276496a6f694d6a41784f5330774f4330784d434a394c4873695932396b5a534936496b525154694973496e42686157525663465276496a6f694d6a41784f5330774f4330784d434a394c4873695932396b5a534936496b645049697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f6955464d694c434a7759576c6b5658425562794936496a49774d546b744d4467744d54416966537837496d4e765a4755694f694a4454434973496e42686157525663465276496a6f694d6a41784f5330774f4330784d434a394c4873695932396b5a534936496c424449697769634746705a465677564738694f6949794d4445354c5441344c544577496e307365794a6a6232526c496a6f69556c4e5649697769634746705a465677564738694f6949794d4445354c5441344c544577496e31644c434a6f59584e6f496a6f694f5467314f5441784d693877496977695a334a68593256515a584a706232524559586c7a496a6f774c434a686458527655484a76624739755a3246305a5751694f6d5a6862484e6c4c434a706330463164473951636d39736232356e5958526c5a4349365a6d4673633256392d70794570666f664d634a35714643686b4631444c786a41764159594c6d51336a654b6f5750676d3135344357765739794d637a4937556e4e5762743541414e4a36326f36414d7950495349544364677157767978457234375971643369326c4c486e44576f49664f356e34676e2f78705236736d72473544337655757a524b75364e754270647754716976462b4f776158634b7348377a42384153514d4348764148736343305062726e656952536f79505045436c35467a584f524f63436c4d6567335a362f6f4449517276466e7379455468674936622b2f62784869436d534a5a567632324c7a2f386f6c333369694b436c742f696d2b793542314c35465261335236456e31534c613956736d4276556a53794c373833586b662b5869566f4e2f4673694e76555568315668546f4c445377667261705636662b61765341585775485a6f4162534b654e486b6475363266385855413d3d2d4d494945506a43434169616741774942416749424254414e42676b71686b69473977304241517346414441594d52597746415944565151444441314b5a585251636d396d6157786c49454e424d423458445445314d5445774d6a41344d6a45304f466f58445445344d5445774d5441344d6a45304f466f77455445504d413047413155454177774763484a765a444e354d494942496a414e42676b71686b6947397730424151454641414f43415138414d49494243674b43415145417863516b712b7a64786c52326d6d525942507a4762554e644d4e364f615869587a784957744d456b724a4d4f2f356f5566514a624c4c754d534d4b305148466d6149333757536879785a63665243696477586a6f74347a6d4e424b6e6c79486f6444696a2f3738546d5671466c386e4f6544352b30374238564561497537633345314e2b6531646f43367768743449342b49456d74735041646f616a355743515651627249384b6554384d3956634249575837664430666865786667335a5274307871774d6358474e703344644a48694f30724364552b49747637456d746e535671396a42473175734d5346764d6f775232356d6a75324a63504670312b49345a492b4671675238677947386f694e44794e456f41627352336c4f7049376772555953766b422f7856792f566f6b6c50434b3268306630474a78466a6e7965384e5431504179776f796c37526d69415652452f454b774944415141426f34475a4d4947574d416b4741315564457751434d414177485159445652304f424259454647457047396f5a4763664c4d474e426b5937536748694d476754634d45674741315564497752424d442b41464b4f65746b686e5168493251623174344c6d306f464b4c6c2f477a6f52796b476a41594d52597746415944565151444441314b5a585251636d396d6157786c49454e4267676b41306d797867374b4465654577457759445652306c42417777436759494b7759424251554841774577437759445652305042415144416757674d413047435371475349623344514542437755414134494341514339575a75596751656453754f6335544f5553725269674d77342f2b7775433545745a426676646c3448542f38767a4d572f6f556c4950345943764130584b794261434a3269582b5a43444b6f506669595869615369482b4878415056364a373976766f75784b7257673258563653684674504c502b30675064477133783952332b6b4a626d416d38772b464f646c577141664a724c76707a4d474e6544553134594758695a3962567a6d495162777242412b632f4634746c4b2f4456303764734e4578696871466f69626e714469564e54476f6d62615532644475703267774b644c3831756138454963474e4578486538326b6a46347a77666164486b33625156766266644177786344793478426a73334c347261504c553379656e537a722f4f457572312b6a664f786e51536d45634d584b58677241513955353567776a634f464b72674f784564656b2f536b3156664f6a76532b6e754d346579457275464d66615a487a6f5169757734497167476334356f684648305555796a596375467878445355396c4d4376387164484b6d2b776e505262306c396c357658734342447568414759443673732b47612b61445936662f71585a75554345554f483351554e626243556c7669537a362b4769526e74316b41394e32516163686c2b3279426661715571723868375a32677378354c634966356b594e73714a30476176585456795768375059694b583462733335345a514c557777612f63472b2b322b774e57502b4874426856784d524e54645668536d3338416b6e5a6c442b505441735747753947794c6d68746932456e567747796253443244786d68786b334950436b684b414b2b706c30655759475a574733744a396d5a37536f7763584c574446416b306c524a6e4b47464d54676772576a5638475970773562713233566d497171444c676b4e7a756f6f673d3d, 'male', '2018-09-05', '13123123123123', 'lmbernardo@slu.edu.oh', 'Naguio'),
(2, 'Owner', 'Landley', 'Bernardo', 'Landley', '25d55ad283aa400af464c76d713c07ad', 0x34303339353137345f3732313737393934313530343639305f353132373934313936333537393931363238385f6e2e6a7067, 'Male', '1996-12-03', '9752826318', 'lmbernardo@slu.edu.ph', 'Baguio City');

-- --------------------------------------------------------

--
-- Table structure for table `owners`
--

DROP TABLE IF EXISTS `owners`;
CREATE TABLE IF NOT EXISTS `owners` (
  `ownerId` int(11) NOT NULL AUTO_INCREMENT,
  `bankName` varchar(255) DEFAULT NULL,
  `bankAccountNumber` varchar(255) DEFAULT NULL,
  `info_infoId` int(11) NOT NULL,
  PRIMARY KEY (`ownerId`,`info_infoId`),
  KEY `fk_owners_info1_idx` (`info_infoId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `owners_has_rooms`
--

DROP TABLE IF EXISTS `owners_has_rooms`;
CREATE TABLE IF NOT EXISTS `owners_has_rooms` (
  `owners_ownerId` int(11) NOT NULL,
  `rooms_roomNo` varchar(255) NOT NULL,
  `amount` int(11) DEFAULT NULL,
  `dateBought` date DEFAULT NULL,
  `moveInDate` date DEFAULT NULL,
  `ModeOfPayment` varchar(45) DEFAULT NULL,
  `downPayment` int(11) DEFAULT NULL,
  `downPaymentMontlyAmortization` int(11) DEFAULT NULL,
  `monthlyAmortization` int(11) DEFAULT NULL,
  `durationToPay` int(11) DEFAULT NULL,
  PRIMARY KEY (`owners_ownerId`,`rooms_roomNo`),
  KEY `fk_owners_has_rooms_rooms2_idx` (`rooms_roomNo`),
  KEY `fk_owners_has_rooms_owners1_idx` (`owners_ownerId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `repairs`
--

DROP TABLE IF EXISTS `repairs`;
CREATE TABLE IF NOT EXISTS `repairs` (
  `roomNo` varchar(255) NOT NULL,
  `description` varchar(45) DEFAULT NULL,
  `dateReported` date DEFAULT NULL,
  `cost` int(11) DEFAULT NULL,
  `dateFinished` date DEFAULT NULL,
  `repairStatus` varchar(45) DEFAULT NULL,
  `employees_employeeId` int(11) NOT NULL,
  `residents_residentId` int(11) NOT NULL,
  PRIMARY KEY (`roomNo`,`employees_employeeId`,`residents_residentId`),
  KEY `fk_owners_has_rooms_rooms1_idx` (`roomNo`),
  KEY `fk_repairs_employees1_idx` (`employees_employeeId`),
  KEY `fk_repairs_residents1_idx` (`residents_residentId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `residents`
--

DROP TABLE IF EXISTS `residents`;
CREATE TABLE IF NOT EXISTS `residents` (
  `residentId` int(11) NOT NULL AUTO_INCREMENT,
  `residentStatus` varchar(255) DEFAULT NULL,
  `school` varchar(255) DEFAULT NULL,
  `course` varchar(255) DEFAULT NULL,
  `yearLevel` int(11) DEFAULT NULL,
  `info_infoId` int(11) NOT NULL,
  PRIMARY KEY (`residentId`,`info_infoId`),
  KEY `fk_residents_info1_idx` (`info_infoId`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `residents`
--

INSERT INTO `residents` (`residentId`, `residentStatus`, `school`, `course`, `yearLevel`, `info_infoId`) VALUES
(1, 'Active', 'Saint Louis University', 'IT', 1, 1);

-- --------------------------------------------------------

--
-- Table structure for table `rooms`
--

DROP TABLE IF EXISTS `rooms`;
CREATE TABLE IF NOT EXISTS `rooms` (
  `roomNo` varchar(255) NOT NULL,
  `rentalFee` int(11) DEFAULT NULL,
  `roomStatus` varchar(255) DEFAULT NULL,
  `building` varchar(45) DEFAULT NULL,
  `size` int(11) DEFAULT NULL,
  `capacity` int(11) DEFAULT NULL,
  PRIMARY KEY (`roomNo`),
  KEY `roomNo` (`roomNo`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `transactions`
--

DROP TABLE IF EXISTS `transactions`;
CREATE TABLE IF NOT EXISTS `transactions` (
  `roomNo` varchar(255) NOT NULL,
  `residentId` int(11) NOT NULL,
  `date` date DEFAULT NULL,
  `moveInDate` date DEFAULT NULL,
  `moveOutDate` date DEFAULT NULL,
  `employees_employeeId` int(11) NOT NULL,
  PRIMARY KEY (`roomNo`,`residentId`,`employees_employeeId`),
  KEY `fk_rooms_has_residents_residents1_idx` (`residentId`),
  KEY `fk_rooms_has_residents_rooms_idx` (`roomNo`),
  KEY `fk_transactions_employees1_idx` (`employees_employeeId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `contactpersons`
--
ALTER TABLE `contactpersons`
  ADD CONSTRAINT `fk_contactPersons_info1` FOREIGN KEY (`info_infoId`) REFERENCES `info` (`infoId`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `employees`
--
ALTER TABLE `employees`
  ADD CONSTRAINT `fk_employees_info1` FOREIGN KEY (`info_infoId`) REFERENCES `info` (`infoId`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `owners`
--
ALTER TABLE `owners`
  ADD CONSTRAINT `fk_owners_info1` FOREIGN KEY (`info_infoId`) REFERENCES `info` (`infoId`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Constraints for table `owners_has_rooms`
--
ALTER TABLE `owners_has_rooms`
  ADD CONSTRAINT `fk_owners_has_rooms_owners1` FOREIGN KEY (`owners_ownerId`) REFERENCES `owners` (`ownerId`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_owners_has_rooms_rooms2` FOREIGN KEY (`rooms_roomNo`) REFERENCES `rooms` (`roomNo`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `repairs`
--
ALTER TABLE `repairs`
  ADD CONSTRAINT `fk_owners_has_rooms_rooms1` FOREIGN KEY (`roomNo`) REFERENCES `rooms` (`roomNo`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_repairs_employees1` FOREIGN KEY (`employees_employeeId`) REFERENCES `employees` (`employeeId`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_repairs_residents1` FOREIGN KEY (`residents_residentId`) REFERENCES `residents` (`residentId`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `residents`
--
ALTER TABLE `residents`
  ADD CONSTRAINT `fk_residents_info1` FOREIGN KEY (`info_infoId`) REFERENCES `info` (`infoId`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `transactions`
--
ALTER TABLE `transactions`
  ADD CONSTRAINT `fk_rooms_has_residents_residents1` FOREIGN KEY (`residentId`) REFERENCES `residents` (`residentId`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_rooms_has_residents_rooms` FOREIGN KEY (`roomNo`) REFERENCES `rooms` (`roomNo`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `fk_transactions_employees1` FOREIGN KEY (`employees_employeeId`) REFERENCES `employees` (`employeeId`) ON DELETE CASCADE ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
